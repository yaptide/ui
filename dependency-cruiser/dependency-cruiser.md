# Dependency Cruiser Manual

Dependency Cruiser is a powerful tool for analyzing and visualizing dependencies in source code. It is designed primarily for JavaScript and TypeScript projects. This tool helps identify and understand the structure of dependencies between modules in your project, making it easier to:

-   Detect issues such as cyclic dependencies
-   Identify violations of architectural rules
-   Anticipate potential difficulties in code maintenance

Additionally, Dependency Cruiser allows you to:

-   Define custom rules to ensure compliance with established standards
-   Generate clear, visual diagrams to analyze the project's structure

## Prerequisites: Installing GraphViz

To fully utilize Dependency Cruiser’s commands, ensure you have **GraphViz** installed on your system. GraphViz is essential for generating visual representations (e.g., SVG files) of your project's dependency graph.

### Installing GraphViz

-   **On Linux/macOS**: Use a package manager like `apt` or `dnf`:
    ```bash
    sudo apt-get install graphviz    # For Debian/Ubuntu
    sudo dnf install graphviz        # For RedHat/CentOS
    ```
-   **On Windows**: Download the installer from the [GraphViz download page](https://www.graphviz.org/download/) and follow the installation instructions.

### Why GraphViz?

Dependency Cruiser relies on GraphViz’s `dot` command to convert `.dot` files into visual formats such as SVG or HTML. For example, the following command generates an SVG file from Dependency Cruiser’s output:

```bash
npx depcruise src --include-only "^src" --output-type dot | dot -T svg > dependency-graph.svg
```

Without GraphViz, this step will fail, and you won’t be able to create graphical representations of your dependencies.

## Usage Commands

Dependency Cruiser provides the following commands for quick usage:

-   **`npm run depcruise:high`**: Generates a high-level dependency diagram.
-   **`npm run depcruise:low`**: Generates a low-level dependency diagram.

### Outputs

Both commands generate the following outputs:

1. **Interactive HTML file**: Open this file using Live Server for an interactive view.
2. **SVG file**: A static, scalable graphic file.

### Optional VSCode Setup

If you are using VSCode, consider installing the [SVG Preview](https://marketplace.visualstudio.com/items?itemName=jock.svg) plugin. This plugin allows you to:

-   Preview the generated SVG files directly in VSCode.
-   Export the graph as a PNG file for easy sharing or documentation.

## Configuration

To modify Dependency Cruiser’s behavior, edit the configuration file located in the `dependency-cruiser` folder. The configuration file is a JavaScript file that defines the rules and settings for your project.

### Sample Configuration File

A detailed description of all available options can be found in the `.dependency-cruiser.js` sample configuration file, which can be generated by the tool. This file provides a comprehensive overview of the customization options available.

## Key Configuration Variables

Here are some of the most important configuration variables you can use:

### Inclusion and Exclusion

-   **`includeOnly`**: Specify which modules to include. This is an array of regular expressions (in string format). Dependency Cruiser will skip everything not matching this pattern.
-   **`exclude`**: Specify which modules to exclude. This is an array of regular expressions (in string format) to match against paths.
-   **`doNotFollow`**: Define modules to ignore during further analysis. This is an array of regular expressions (in string format) to match against paths.

### Graphical Representation

-   **`collapsePattern`**: Pattern of modules to consolidate in high-level dependency graphs. If you use the high-level graphical dependency graph reporter (`archi`), tweaking this pattern can optimize the visualization.

### Graph Layout

-   **`splines`**: Controls the style of graph edges. For example:
    -   **`"ortho"`**: Produces straight lines but can be slow for large graphs.
-   **`rankdir`**: Sets the graph's direction. Common values:
    -   **`"TB"`**: Top-to-bottom (default).
    -   **`"LR"`**: Left-to-right.
-   **`ranksep`**: Adjusts the separation between graph ranks for better clarity.
-   **`nodesep`**: Adjusts the separation between nodes for better clarity.

## Further Development

The current configuration files used by the commands are very simplified. In the future, they should be replaced with an edited default configuration that is generated by Dependency Cruiser. This enhanced configuration will provide a more comprehensive setup, enabling better analysis and compliance with architectural standards.

Keep up with the latest best practices and advanced configurations by regularly consulting Dependency Cruiser’s documentation and engaging with its user community.
